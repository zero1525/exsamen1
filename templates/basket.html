{% extends 'base.html' %}
{% load static %}
{% block content %}
<main class="container mx-auto p-6">
    <h1 class="text-2xl font-bold mb-4">Корзина</h1>

    {% if basket %}
    <table class="table-auto w-full border-collapse border border-gray-300 mb-4">
        <thead>
            <tr class="bg-gray-200">
                <th class="border px-4 py-2 text-left">Товар</th>
                <th class="border px-4 py-2 text-center">Количество</th>
                <th class="border px-4 py-2 text-center">Цена за единицу</th>
                <th class="border px-4 py-2 text-center">Сумма</th>
                <th class="border px-4 py-2 text-center">Удалить</th>
            </tr>
        </thead>
        <tbody>
            {% for item in basket %}
            <tr>
                <td class="border px-4 py-2">{{ item.goods.name }}</td>
                <td class="border px-4 py-2 text-center">
                    <a href="{% url 'decrease_quantity' item.pk %}" class="text-blue-600 font-bold px-2">−</a>
                    {{ item.quantity }}
                    <a href="{% url 'increase_quantity' item.pk %}" class="text-blue-600 font-bold px-2">+</a>
                </td>
                <td class="border px-4 py-2 text-center">{{ item.goods.price }}</td>
                <td class="border px-4 py-2 text-center">{{ item.total_price }}</td>
                <td class="border px-4 py-2 text-center">
                    <a href="{% url 'remove_from_basket' item.pk %}" class="text-red-600 hover:underline">Удалить</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr class="bg-gray-100 font-bold">
                <td colspan="3" class="border px-4 py-2 text-right">Общая стоимость:</td>
                <td class="border px-4 py-2 text-center">{{ total }}</td>
                <td class="border px-4 py-2"></td>
            </tr>
        </tfoot>
    </table>

    <div class="text-center mt-6">
        <a href="{% url 'goods_list' %}" class="text-blue-600 hover:underline mr-4">Продолжить покупки</a>
        <a href="{% url 'create_order' %}" class="bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700">
            Оформить заказ
        </a>
    </div>
    {% else %}
    <p>Ваша корзина пуста.</p>
    {% endif %}
</main>
{% endblock %}
